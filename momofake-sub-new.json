{
  "log": {
    "level": "info",
    "timestamp": true
  },
  "dns": {
    "servers": [
      { "tag": "proxy-dns", "address": "https://8.8.8.8/dns-query", "detour": "proxy" },
      { "tag": "local-dns", "address": "223.5.5.5", "detour": "direct" },
      { "tag": "block-dns", "address": "rcode://success" }
    ],
    "rules": [
      { "outbound": "any", "server": "local-dns" },
      { "clash_mode": "Direct", "server": "local-dns" },
      { "clash_mode": "Global", "server": "proxy-dns" },
      { "rule_set": "geosite-category-ads-all", "server": "block-dns" },
      // 这里的逻辑：如果你在模板A里有特定的YouTube规则，确保它们在这里优先走 proxy-dns
      { "rule_set": ["geosite-youtube", "geosite-google"], "server": "proxy-dns" },
      { "rule_set": "geosite-cn", "server": "local-dns" }
    ],
    "final": "proxy-dns",
    "strategy": "prefer_ipv4"
  },
  "inbounds": [
    {
      "type": "tun",
      "inet4_address": "172.19.0.1/30",
      "mtu": 1400,
      "auto_route": true,
      "strict_route": true,
      "stack": "system",
      "sniff": true,
      "sniff_override_destination": true,
      "udp_timeout": 300
    }
  ],
  "outbounds": [
    { "type": "selector", "tag": "proxy", "outbounds": ["{all}"] },
    { "type": "direct", "tag": "direct" },
    { "type": "dns", "tag": "dns-out" },
    { "type": "block", "tag": "block" },
    // 关键：这里是Sub-Store生成节点的地方，通过脚本确保Hy2节点带上带宽
    { "type": "selector", "tag": "youtube", "outbounds": ["proxy", "direct"] }
  ],
  "route": {
    "rule_set": [
      {
        "tag": "geosite-youtube",
        "type": "remote",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-youtube.srs"
      },
      {
        "tag": "geosite-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-cn.srs"
      }
      // 此处省略其他从模板A平移过来的 rule_set 定义...
    ],
    "rules": [
      { "protocol": "dns", "outbound": "dns-out" },
      { "clash_mode": "Direct", "outbound": "direct" },
      { "clash_mode": "Global", "outbound": "proxy" },
      { "rule_set": "geosite-youtube", "outbound": "proxy" },
      { "rule_set": "geosite-cn", "outbound": "direct" },
      { "ip_is_private": true, "outbound": "direct" }
    ],
    "final": "proxy",
    "auto_detect_interface": true
  },
  "experimental": {
    "cache_file": { "enabled": true },
    "clash_api": {
      "external_controller": "0.0.0.0:9090",
      "secret": "",
      "external_ui": "ui",
      "default_mode": "Rule"
    }
  }
}
